<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import 'https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700,800';
      @import 'https://fonts.googleapis.com/css?family=Inconsolata';

      body { font-family: 'Open Sans', sans-serif; }
      h1, h2, h3 {
        font-weight: normal;
      }
      .footnote {
          position:absolute;
          bottom: 3em;
      }
      .red {
          color: red;
      }
      .remark-code, .remark-inline-code { font-family: 'Incosolata'; }
      .remark-code{
          border-radius:10px;
      }
      .remark-slide-content{
          background-size: cover;
      }
      .remark-code-line-highlighted {
          background-color: #073642;
          nop:#eee8d5;
      }

      .triangle-left{
	    width: 0;
	    height: 0;
	    border-bottom: 80em solid rgba(255,237,0,0.8);
	    border-right: 34em solid transparent;
	    position: absolute;
	    top: -620px;
	    left: 0;
      }

      .triangle-left-bis{
	    width: 0;
	    height: 0;
	    border-bottom: 70em solid rgba(255,237,0,0.55);
	    border-right: 34em solid transparent;
	    position: absolute;
	    top: -590px;
	    left: 0;
      }

      .title-opening{
      	position: absolute;
      	z-index: 30;
        top: 460px;
        left: 72px;
      }

        .title-opening h1{
          font-weight: 300;
          font-size: 43px;
          color:#323232;
          line-height: 0.8em;
          margin-bottom: 0em;
        }

        .title-opening h2{
          font-weight: 800;
          font-size: 17px;
          color:#fff;
        }

        .line{
          width: 200px;
          height: 5px;
          border-top: 5px solid #fff;
          z-index: 50;
          position: absolute;
          top: 548px;
          left: 220px;
        }

      .logo-min{
        position: absolute;
        z-index: 40;
        top:392px;
        left:72px;
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: y-slide-opening,
background-image: url(img/bgi-opening.png)

.triangle-left[]
.triangle-left-bis[]
.logo-min[![logo yaal](img/logo-yaal.png)]
.title-opening[
# Tests Tout-Terrain
## Python édition]
.line[]
---
class: y-slide-info,
background-color: #FFED00
# Big ups:
## Pyconf
## Yaal
---

class: y-slide-info,
background-color: #FFED00
# Agenda

1. Les tests
2. Les terrains dangereux
3. Les outils

---
# Les tests?
- Ca sert à rien!
- Les methodes formelles
Mais pour l'instant...

---
# Les tests?
- Specifications
- Fonctionnalités
- Performances
- Sécurité

---
# Les tests?
Deux approches:
- Black box
- White box

---
# Les tests?
1. Unitaire (bas niveau)
2. Intégration (haut niveau)
3. Fonctionnel (système (aka ca fonctionne chez moi))
4. Acceptation (recette, humain...)
.footnote[Selon le CFTL (www.cftl.fr)]
---

# Les tests?
- Les tests de performances
    - Volume
    - Durée
    - Concurence
    - Temps de récupération
- Les tests de sécurités
    - Accès (page/mémoire/disque)
    - Entrées
- Les tests d'acceptations
    - Alpha/beta
    - Recette
    - Usabilité (aveugle, senior...)
Et la liste ne doit pas être exhaustive!!!
---

# Les tests unitaires

```python
def super_additionneur(param1, param2):
    return float(param1) + float(param2)

def test_super_additionneur():
    assert super_additionneur(1, 1) == 2
    assert super_additionneur(3, 5) == 8
    assert super_additionneur(1, -1) == 0
    assert super_additionneur(2.5, 5.) == 7.5
*   assert super_additionneur("vingt", " et un") == "vingt et un"
    assert super_additionneur("1", "1") == 2
    assert super_additionneur("2.5", 5) == 7.5
```
.footnote[.red[*] Exemple sametmax.com]
???
Exemple sametmax.com
---

# Les tests fonctionnels

```python
def super_additionneur(param1, param2):
    return param1 + param2

def test_addition_de_deux_nombres():
    #Arrange
    app = TestApp(application)

    #Act
    response = app.post_json('/super-additionneur', dict(param1=1, param2=2))

    #Assert
    assert response.status == '200 OK'
    assert response.content_type == 'application/json'
    assert response.json == { "result": 3 }

```
---
background-image: url(img/wrc-sweeden.jpg)

# Les terrains dangereux
- BDD
- Temps
- Fichiers
- Réseaux
- Concurence
---
background-image: url(img/giphy.gif)
# BDD
- En mémoire!
---
# Temps
- datetime: monkeypatch
- freezegun

---
# Fichiers
- Mock!
- Fake!
---
# Réseaux
- Mock!
- Fake!
---
# Concurence
- Test run en parralèle
- Multiple threads!
---
# Les outils
- pytest , nose , unittest
- Mock, Hypothesis
- Tox
---
# Tox
tox.ini

```ini
[tox]
envlist = py27, py35
[testenv]
*deps=
    pytest
    webtest
    werkzeug
commands=pytest
```
---
Vous avez tout vu!
---
Questions?



    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
        var slideshow = remark.create({
            highlightLanguage: 'python',
            highlightStyle: 'solarized-dark',
            highlightLines: true,
        });
    </script>
  </body>
</html>
